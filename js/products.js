// products.js - Product Data for GreenLion SPA
const PRODUCTS = [
    {
        id: 684649779,
        name: "Green Lion 40W Dual PD Wall Charger With USB-C To Lightning Cable 1m EU - Black",
        description: "The Green Lion 40W Dual PD Wall Charger supports fast, reliable charging with two USB-C ports, each that can charge to a maximum of 20W for an aggregate maximum output of 40W. With multiple voltage support — 5V at 3A, 9V at 2.22A, and 12V at 1.66A — combined with advanced PPS technology for optimum power delivery for efficiency and adaptability, this charger is made of flame-retardant PC material that is more durable and safer. The integrated charging protection keeps the devices safe from overcurrent, overheating, and short circuits. A 1-meter USB-C to Lightning cable comes with it, which is compatible with fast-charging Apple devices. The product supports universal compatibility and EU plug, so it's perfect for use at home, in the workplace, or while traveling, providing safe and fast power to any kind of device.",
        base_price: 13.33,
        salePrice: null,
        price: 13.33,
        base_shipping_cost: 0,
        free_shipping: true,
        sku: "GN40EUC2LBK",
        slug: "green-lion-40w-dual-pd-wall-charger-with-usb-c-to-lightning-cable-1m-eu-black",
        brand: "Green Lion",
        rating: 4.5,
        reviews_count: 28,
        status: "active",
        isFeatured: true,
        isNew: false,
        isOnSale: false,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 32,
        hasVariants: false,
        totalVariantStock: 0,
        lowStockThreshold: 5,
        features: {
            input: "0.5A 100-240V~50-60Hz",
            usb_c1_c2_output: "DC 5V/3A - DC 9V/2.22A - DC 12V/1.66A",
            pps: "APD01: 3.3-5.9V/3A, APD02: 3.3-11V/2A",
            usb_c_usb_c_output: "20W+20W",
            total_output: "40W(Max)",
            flame_retardant_pc: true,
            type_c_port_x2: true,
            charging_protection: true,
            universal_compatibility: true
        },
        images: [
            "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1551816230-ef5deaed4a26?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {},
        option_images: {},
        variant_images: {},
        option_variants_stock: {},
        option_price_adjustments: {},
        option_shipping_adjustments: {},
        weight: { value: 0.2, unit: "kg" },
        dimensions: { length: 8.5, width: 4.2, height: 2.8, unit: "cm" },
        option_dimension_overrides: {},
        categories: [466617751],
        upselling: [153527202, 1617805470],
        crossSelling: [1617805470],
        relatedProducts: [153527202, 1617805470],
        createdAt: "2025-05-27T10:28:17.758Z",
        updatedAt: "2025-06-01T17:46:34.042Z",
        availability: "in_stock",
        condition: "new",
        ean: "",
        gtin: "09904781905046",
        keywords: ["charger", "USB-C", "Lightning", "fast charging", "dual port"],
        metaDescription: "Green Lion 40W Dual PD Wall Charger with USB-C to Lightning cable. Fast charging for all devices with safety protection.",
        metaTitle: "Green Lion 40W Dual PD Wall Charger - Fast Charging | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "1 year manufacturer warranty"
    },
    {
        id: 153527202,
        name: "Green Lion Steam 1800W Garment Steamer - Beige",
        description: "Green Lion Steam 1800W Garment Steamer utilizes strong and effective wrinkle removal with 1800W rated output and a 35-second quick heat-up time. Built from durable PP and stainless steel, it comes with a detachable 350ml water tank with up to 20 minutes of continuous steam at 32g/min, adjustable at 150°F to 230°F suitable for various fabrics. Its stainless steel sole offers smooth and soft care and anti-dry burning protection for secure use. Light, portable, and easy to maintain, this speaker comes with a 1.7m UK plug cable for comfortable handling. Ideal for clothes freshness and crispness without much effort, it suits home or travel use.",
        base_price: 35.09,
        salePrice: 29.99,
        price: 29.99,
        base_shipping_cost: 0,
        free_shipping: false,
        sku: "GNGS1800WBG",
        slug: "green-lion-steam-1800w-garment-steamer-beige",
        brand: "Green Lion",
        rating: 4.2,
        reviews_count: 15,
        status: "active",
        isFeatured: false,
        isNew: false,
        isOnSale: true,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 50,
        hasVariants: false,
        totalVariantStock: 0,
        lowStockThreshold: 5,
        features: {
            material: "PP + Stainless Steel",
            rated_power: "1800W",
            rated_voltage: "220-240V",
            rated_frequency: "50-60Hz",
            water_tank_capacity: "350mL",
            temperature: "150-230° F",
            steam_output: "32 g/min",
            fast_heating_time: "35 sec",
            continuous_steam_time: "20 mins",
            power_cord: "UK Plug 1.7 m",
            anti_dry_burning: true,
            stainless_steel_sole: true,
            detachable_water_tank: true,
            easy_to_store: true,
            gentle_fabric_care: true,
            compact_lightweight: true
        },
        images: [
            "https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {},
        option_images: {},
        variant_images: {},
        option_variants_stock: {},
        option_price_adjustments: {},
        option_shipping_adjustments: {},
        weight: { value: 1.2, unit: "kg" },
        dimensions: { length: 25, width: 12, height: 15, unit: "cm" },
        option_dimension_overrides: {},
        categories: [754398123],
        upselling: [684649779],
        crossSelling: [1617805470],
        relatedProducts: [684649779, 1617805470],
        createdAt: "2025-05-27T10:28:20.400Z",
        updatedAt: "2025-05-27T10:28:20.401Z",
        availability: "in_stock",
        condition: "new",
        ean: "",
        gtin: "0990478123557",
        keywords: ["steamer", "garment", "clothes", "wrinkles", "home appliance"],
        metaDescription: "Green Lion 1800W Garment Steamer with 35-second quick heat-up. Perfect for wrinkle-free clothes at home or travel.",
        metaTitle: "Green Lion 1800W Garment Steamer - Quick Heat-Up | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "2 year manufacturer warranty"
    },
    {
        id: 1617805470,
        name: "Green Lion G-Pro Earbuds 3 - White",
        description: "Get a smooth audio experience using G-Pro Earbuds 3 from Green Lion, which are meant for comfort, clarity, and ease. The earbuds consist of the GPRO+ chipset and 13mm high-excursion drivers, which provide a sound experience like no other, along with deep bass and brilliant highs. In the case of Bluetooth 5.3, you are able to stay connected up to a range of 25 meters. A sophisticated design promises a nice, comfortable fit, and touch controls pose no problem in music or call management. Five hours of music listening plus a charge extended to up to 20 hours by the charger case make it possible to enjoy the minimum power consumption. The package contains the earbuds, the charging case, and, last but not least, a Type-C to Lightning cable. The G-Pro Earbuds 3 are a perfect match for you whether you are working, traveling, or just relaxing with a product that is styled and has the necessary features for your lifestyle.",
        base_price: 26.93,
        salePrice: null,
        price: 26.93,
        base_shipping_cost: 0,
        free_shipping: false,
        sku: "GNAPOD3GPWH",
        slug: "green-lion-g-pro-earbuds-3-white",
        brand: "Green Lion",
        rating: 4.7,
        reviews_count: 42,
        status: "active",
        isFeatured: true,
        isNew: true,
        isOnSale: false,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 16,
        hasVariants: true,
        totalVariantStock: 45,
        lowStockThreshold: 5,
        features: {
            chipset: "GPRO+",
            speaker: "13mm High-Excursion Driver",
            connectivity: "Bluetooth V5.3",
            distance: "25m",
            battery: "Up to 5 Hours with a Single Charge, Up to 20 Hours Work with Charging Case",
            touch_control: true,
            comfortable_to_wear: true,
            type_c_to_lightning_cable: true,
            works_with_magsafe_charging: true
        },
        images: [
            "https://images.unsplash.com/photo-1590658268037-6bf12165a8df?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1484704849700-f032a568e944?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {
            color: ["White", "Black", "Rose Gold"]
        },
        option_images: {
            color: {
                "White": [
                    "https://images.unsplash.com/photo-1590658268037-6bf12165a8df?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                ],
                "Black": [
                    "https://images.unsplash.com/photo-1484704849700-f032a568e944?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                ],
                "Rose Gold": [
                    "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                ]
            }
        },
        variant_images: {},
        option_variants_stock: {
            "White": 16,
            "Black": 20,
            "Rose Gold": 9
        },
        option_price_adjustments: {
            color: {
                "White": 0,
                "Black": 0,
                "Rose Gold": 3.00
            }
        },
        option_shipping_adjustments: {},
        weight: { value: 0.1, unit: "kg" },
        dimensions: { length: 6, width: 4, height: 3, unit: "cm" },
        option_dimension_overrides: {},
        categories: [1017426431],
        upselling: [684649779, 153527202],
        crossSelling: [684649779],
        relatedProducts: [684649779, 153527202],
        createdAt: "2025-05-27T10:28:28.550Z",
        updatedAt: "2025-05-27T10:28:28.550Z",
        availability: "in_stock",
        condition: "new",
        ean: "6935100190228",
        gtin: "",
        keywords: ["earbuds", "wireless", "bluetooth", "audio", "music"],
        metaDescription: "Green Lion G-Pro Earbuds 3 with Bluetooth 5.3, 20-hour battery life, and premium sound quality. Available in multiple colors.",
        metaTitle: "Green Lion G-Pro Earbuds 3 - Wireless Audio | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "1 year manufacturer warranty"
    },
    {
        id: 245789123,
        name: "Green Lion Power Bank 20000mAh Fast Charging - Black",
        description: "Stay powered up with the Green Lion 20000mAh Power Bank featuring fast charging technology and multiple output ports. This high-capacity portable charger can charge your smartphone multiple times and supports fast charging for compatible devices. With LED indicators showing remaining power and a sleek design, it's perfect for travel, work, or daily use.",
        base_price: 24.99,
        salePrice: null,
        price: 24.99,
        base_shipping_cost: 0,
        free_shipping: true,
        sku: "GLPB20000BK",
        slug: "green-lion-power-bank-20000mah-fast-charging-black",
        brand: "Green Lion",
        rating: 4.6,
        reviews_count: 89,
        status: "active",
        isFeatured: true,
        isNew: false,
        isOnSale: false,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 78,
        hasVariants: false,
        totalVariantStock: 0,
        lowStockThreshold: 10,
        features: {
            capacity: "20000mAh",
            input: "USB-C 18W",
            output: "USB-A 22.5W, USB-C 20W",
            fast_charging: true,
            led_indicators: true,
            multiple_protection: true,
            slim_design: true,
            universal_compatibility: true
        },
        images: [
            "https://images.unsplash.com/photo-1609091839311-d5365f9ff1c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1551816230-ef5deaed4a26?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {},
        option_images: {},
        variant_images: {},
        option_variants_stock: {},
        option_price_adjustments: {},
        option_shipping_adjustments: {},
        weight: { value: 0.4, unit: "kg" },
        dimensions: { length: 15, width: 7, height: 2.5, unit: "cm" },
        option_dimension_overrides: {},
        categories: [466617751],
        upselling: [684649779],
        crossSelling: [1617805470],
        relatedProducts: [684649779, 1617805470],
        createdAt: "2025-06-01T08:15:30.123Z",
        updatedAt: "2025-06-01T08:15:30.123Z",
        availability: "in_stock",
        condition: "new",
        ean: "6935100198234",
        gtin: "",
        keywords: ["power bank", "portable charger", "fast charging", "20000mAh"],
        metaDescription: "Green Lion 20000mAh Power Bank with fast charging technology. Multiple ports and LED indicators for all your devices.",
        metaTitle: "Green Lion 20000mAh Power Bank - Fast Charging | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "1 year manufacturer warranty"
    },
    {
        id: 356892147,
        name: "Green Lion Professional Hair Trimmer Set - Silver",
        description: "Achieve professional grooming results at home with the Green Lion Professional Hair Trimmer Set. This comprehensive kit includes precision blades, multiple length guards, and a powerful motor for smooth cutting. The ergonomic design ensures comfortable handling, while the long-lasting battery provides cordless convenience. Perfect for maintaining your hairstyle with salon-quality results.",
        base_price: 45.99,
        salePrice: 39.99,
        price: 39.99,
        base_shipping_cost: 0,
        free_shipping: true,
        sku: "GLHT2024SV",
        slug: "green-lion-professional-hair-trimmer-set-silver",
        brand: "Green Lion",
        rating: 4.4,
        reviews_count: 67,
        status: "active",
        isFeatured: false,
        isNew: false,
        isOnSale: true,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 34,
        hasVariants: false,
        totalVariantStock: 0,
        lowStockThreshold: 8,
        features: {
            blade_type: "Precision Stainless Steel",
            motor: "High-Performance",
            battery_life: "120 minutes",
            charging_time: "2 hours",
            length_guards: "8 pieces",
            waterproof: "IPX6",
            ergonomic_design: true,
            professional_grade: true
        },
        images: [
            "https://images.unsplash.com/photo-1503602642458-232111445657?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1521590832167-7bcbfaa6381f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {},
        option_images: {},
        variant_images: {},
        option_variants_stock: {},
        option_price_adjustments: {},
        option_shipping_adjustments: {},
        weight: { value: 0.3, unit: "kg" },
        dimensions: { length: 18, width: 5, height: 4, unit: "cm" },
        option_dimension_overrides: {},
        categories: [20182851],
        upselling: [153527202],
        crossSelling: [684649779],
        relatedProducts: [153527202, 684649779],
        createdAt: "2025-06-01T09:22:15.456Z",
        updatedAt: "2025-06-01T09:22:15.456Z",
        availability: "in_stock",
        condition: "new",
        ean: "6935100201567",
        gtin: "",
        keywords: ["hair trimmer", "grooming", "professional", "beard", "clipper"],
        metaDescription: "Green Lion Professional Hair Trimmer Set with precision blades and 120-minute battery life. Salon-quality grooming at home.",
        metaTitle: "Green Lion Professional Hair Trimmer Set | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "2 year manufacturer warranty"
    },
    {
        id: 478963258,
        name: "Green Lion Smart WiFi Security Camera HD 1080p",
        description: "Keep your home secure with the Green Lion Smart WiFi Security Camera featuring crystal-clear 1080p HD video recording, night vision, motion detection, and two-way audio. Easy to set up and control via smartphone app, this camera provides 24/7 monitoring with cloud storage options. Perfect for indoor use with pan and tilt functionality for complete room coverage.",
        base_price: 89.99,
        salePrice: null,
        price: 89.99,
        base_shipping_cost: 0,
        free_shipping: true,
        sku: "GLCAM1080HD",
        slug: "green-lion-smart-wifi-security-camera-hd-1080p",
        brand: "Green Lion",
        rating: 4.3,
        reviews_count: 123,
        status: "active",
        isFeatured: true,
        isNew: true,
        isOnSale: false,
        requiresShipping: true,
        requiresInventoryTracking: true,
        stock: 25,
        hasVariants: false,
        totalVariantStock: 0,
        lowStockThreshold: 5,
        features: {
            resolution: "1080p HD",
            night_vision: "Up to 10m",
            motion_detection: true,
            two_way_audio: true,
            pan_tilt: "355° / 95°",
            wifi_connectivity: "2.4GHz",
            cloud_storage: true,
            app_control: true,
            privacy_mode: true
        },
        images: [
            "https://images.unsplash.com/photo-1558002932-63cfafed2d4c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
        ],
        options: {},
        option_images: {},
        variant_images: {},
        option_variants_stock: {},
        option_price_adjustments: {},
        option_shipping_adjustments: {},
        weight: { value: 0.5, unit: "kg" },
        dimensions: { length: 12, width: 12, height: 15, unit: "cm" },
        option_dimension_overrides: {},
        categories: [754398123],
        upselling: [153527202],
        crossSelling: [245789123],
        relatedProducts: [153527202, 245789123],
        createdAt: "2025-06-01T10:35:42.789Z",
        updatedAt: "2025-06-01T10:35:42.789Z",
        availability: "in_stock",
        condition: "new",
        ean: "6935100204578",
        gtin: "",
        keywords: ["security camera", "WiFi", "1080p", "surveillance", "smart home"],
        metaDescription: "Green Lion Smart WiFi Security Camera with 1080p HD video, night vision, and motion detection. Monitor your home 24/7.",
        metaTitle: "Green Lion Smart WiFi Security Camera 1080p | GreenLion Lebanon",
        returnPolicy: "30-day return policy",
        warranty: "2 year manufacturer warranty"
    }
];

// Product utility functions
const ProductUtils = {
    // Get all products
    getAll() {
        return PRODUCTS;
    },

    // Get featured products
    getFeatured() {
        return PRODUCTS.filter(product => product.isFeatured);
    },

    // Get new products
    getNew() {
        return PRODUCTS.filter(product => product.isNew);
    },

    // Get sale products
    getOnSale() {
        return PRODUCTS.filter(product => product.isOnSale);
    },

    // Get product by ID
    getById(id) {
        return PRODUCTS.find(product => product.id === id);
    },

    // Get product by slug
    getBySlug(slug) {
        return PRODUCTS.find(product => product.slug === slug);
    },

    // Get products by category
    getByCategory(categoryId) {
        return PRODUCTS.filter(product =>
            product.categories && product.categories.includes(categoryId)
        );
    },

    // Get products by brand
    getByBrand(brand) {
        return PRODUCTS.filter(product =>
            product.brand && product.brand.toLowerCase() === brand.toLowerCase()
        );
    },

    // Search products
    search(query) {
        const searchTerm = query.toLowerCase();
        return PRODUCTS.filter(product =>
            product.name.toLowerCase().includes(searchTerm) ||
            product.description.toLowerCase().includes(searchTerm) ||
            (product.keywords && product.keywords.some(keyword =>
                keyword.toLowerCase().includes(searchTerm)
            ))
        );
    },

    // Get related products
    getRelated(productId, maxResults = 4) {
        const product = this.getById(productId);
        if (!product) return [];

        // Get explicitly defined related products
        let related = [];
        if (product.relatedProducts && product.relatedProducts.length > 0) {
            related = product.relatedProducts.map(id => this.getById(id)).filter(Boolean);
        }

        // If not enough related products, get from same categories
        if (related.length < maxResults && product.categories) {
            const categoryProducts = product.categories.reduce((acc, categoryId) => {
                return acc.concat(this.getByCategory(categoryId));
            }, []);

            const additionalProducts = categoryProducts
                .filter(p => p.id !== productId && !related.find(r => r.id === p.id))
                .slice(0, maxResults - related.length);

            related = related.concat(additionalProducts);
        }

        return related.slice(0, maxResults);
    },

    // Get upselling products
    getUpselling(productId) {
        const product = this.getById(productId);
        if (!product || !product.upselling) return [];

        return product.upselling.map(id => this.getById(id)).filter(Boolean);
    },

    // Get cross-selling products
    getCrossSelling(productId) {
        const product = this.getById(productId);
        if (!product || !product.crossSelling) return [];

        return product.crossSelling.map(id => this.getById(id)).filter(Boolean);
    },

    // Filter products
    filter(options = {}) {
        let filtered = [...PRODUCTS];

        // Filter by category
        if (options.categoryIds && options.categoryIds.length > 0) {
            filtered = filtered.filter(product =>
                product.categories &&
                product.categories.some(catId => options.categoryIds.includes(catId))
            );
        }

        // Filter by price range
        if (options.minPrice !== undefined || options.maxPrice !== undefined) {
            filtered = filtered.filter(product => {
                const price = product.salePrice || product.base_price || product.price;
                const minCheck = options.minPrice === undefined || price >= options.minPrice;
                const maxCheck = options.maxPrice === undefined || price <= options.maxPrice;
                return minCheck && maxCheck;
            });
        }

        // Filter by brand
        if (options.brands && options.brands.length > 0) {
            filtered = filtered.filter(product =>
                product.brand && options.brands.includes(product.brand)
            );
        }

        // Filter by availability
        if (options.inStock) {
            filtered = filtered.filter(product => {
                if (product.hasVariants) {
                    return product.totalVariantStock > 0;
                }
                return product.stock > 0;
            });
        }

        // Filter by features
        if (options.isNew) {
            filtered = filtered.filter(product => product.isNew);
        }

        if (options.isOnSale) {
            filtered = filtered.filter(product => product.isOnSale);
        }

        if (options.isFeatured) {
            filtered = filtered.filter(product => product.isFeatured);
        }

        return filtered;
    },

    // Sort products
    sort(products, sortBy = 'featured') {
        const sorted = [...products];

        switch (sortBy) {
            case 'price-asc':
                return sorted.sort((a, b) => {
                    const priceA = a.salePrice || a.base_price || a.price;
                    const priceB = b.salePrice || b.base_price || b.price;
                    return priceA - priceB;
                });

            case 'price-desc':
                return sorted.sort((a, b) => {
                    const priceA = a.salePrice || a.base_price || a.price;
                    const priceB = b.salePrice || b.base_price || b.price;
                    return priceB - priceA;
                });

            case 'name':
                return sorted.sort((a, b) => a.name.localeCompare(b.name));

            case 'newest':
                return sorted.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            case 'rating':
                return sorted.sort((a, b) => (b.rating || 0) - (a.rating || 0));

            case 'featured':
            default:
                return sorted.sort((a, b) => {
                    if (a.isFeatured && !b.isFeatured) return -1;
                    if (!a.isFeatured && b.isFeatured) return 1;
                    if (a.isNew && !b.isNew) return -1;
                    if (!a.isNew && b.isNew) return 1;
                    return 0;
                });
        }
    },

    // Get product statistics
    getStats() {
        const totalProducts = PRODUCTS.length;
        const featuredProducts = this.getFeatured().length;
        const newProducts = this.getNew().length;
        const saleProducts = this.getOnSale().length;
        const inStockProducts = PRODUCTS.filter(p =>
            p.hasVariants ? p.totalVariantStock > 0 : p.stock > 0
        ).length;

        const avgRating = PRODUCTS.reduce((sum, p) => sum + (p.rating || 0), 0) / totalProducts;
        const totalReviews = PRODUCTS.reduce((sum, p) => sum + (p.reviews_count || 0), 0);

        return {
            totalProducts,
            featuredProducts,
            newProducts,
            saleProducts,
            inStockProducts,
            avgRating: Math.round(avgRating * 10) / 10,
            totalReviews
        };
    },

    // Get all brands
    getBrands() {
        const brands = [...new Set(PRODUCTS.map(p => p.brand).filter(Boolean))];
        return brands.sort();
    },

    // Get price range
    getPriceRange() {
        const prices = PRODUCTS.map(p => p.salePrice || p.base_price || p.price);
        return {
            min: Math.min(...prices),
            max: Math.max(...prices)
        };
    }
};

// Export for use in other files
if (typeof window !== 'undefined') {
    window.PRODUCTS = PRODUCTS;
    window.ProductUtils = ProductUtils;
}

// Alpine.js integration
document.addEventListener('alpine:init', () => {
    // Product store for Alpine.js
    Alpine.store('products', {
        data: PRODUCTS,
        utils: ProductUtils,

        // Get all products
        getAll() {
            return this.data;
        },

        // Get featured products
        getFeatured() {
            return this.utils.getFeatured();
        },

        // Get product by slug
        getBySlug(slug) {
            return this.utils.getBySlug(slug);
        },

        // Search products
        search(query) {
            return this.utils.search(query);
        },

        // Filter and sort products
        filterAndSort(filters = {}, sortBy = 'featured') {
            const filtered = this.utils.filter(filters);
            return this.utils.sort(filtered, sortBy);
        },

        // Get related products
        getRelated(productId, maxResults = 4) {
            return this.utils.getRelated(productId, maxResults);
        }
    });
});